<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <style>
    svg.railroad-diagram {
      background-color: hsl(30, 20%, 95%);
    }

    svg.railroad-diagram path {
      stroke-width: 3;
      stroke: black;
      fill: rgba(0, 0, 0, 0);
    }

    svg.railroad-diagram text {
      font: bold 14px monospace;
      text-anchor: middle;
    }

    svg.railroad-diagram text.label {
      text-anchor: start;
    }

    svg.railroad-diagram text.comment {
      font: italic 12px monospace;
    }

    svg.railroad-diagram rect {
      stroke-width: 3;
      stroke: black;
      fill: hsl(120, 100%, 90%);
    }
  </style>
  <link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>

  <!-- Header -->
  <h1 id="lotus-syntax-module">Lotus Syntax Module</h1>
  <p>Last updated : <em>1st of July, 2019</em></p>
  <p><strong>Editors :</strong></p>
  <ul>
    <li>Blokyk</li>
  </ul>
  <hr>

  <!-- Abstract -->

  <h2 id="abstract">Abstract</h2>
  <p>This document describes the basic structure and syntax of Lotus source code. It defines, in details, the
    tokenizing, parsing, and translation of Lotus.</p>

  <p>Lotus is an open-source language created to facilitate the work of web designers and web developpers. This document
    describes its syntax as well as the way it should be interpreted by a compiler to conform to the Lotus
    specification.</p>

  <!-- Table of contents -->

  <h2 id="toc">Table Of Contents</h2>
  <ol class="toc">
    <li class="toc-item">

      <!-- Introduction -->

      <p class="toc-title"><strong><a href="#intro">Introduction</a></strong></p>
      <ul>
        <li class="toc-item"><a href="#conventions">Visual and
            Writing Conventions</a></li>
      </ul>
    </li> <!-- End of Introduction -->

    <li class="toc-item">

      <!-- Overview -->

      <p class="toc-title">
        <strong><a href="#overview">Overview</a></strong>
      </p>

      <ul>
        <li class="toc-item">
          <a href="#general-defs">Definitions</a>
        </li>

        <li class="toc-item">
          <a href="#tokens">Token types</a>
        </li>

        <li class="toc-item">
          <a href="#tokens-diagrams">Tokens Railroad Diagrams</a>
        </li>

        <li class="toc-item">
          <a href="#tokenization-errors">Tokenization Errors</a>
        </li>

        <li class="toc-item">
          <a href="#parse-tree-model">Parse Tree Model</a>
        </li>

        <li class="toc-item">
          <a href="#parsing-errors">Parsing Errors</a>
        </li>
      </ul>
    </li> <!-- End of Overview -->

    <li class="toc-item">

      <!-- Formal Syntax Definition -->

      <p class="toc-title">
        <strong><a href="#syntax">Formal Syntax Definition</a></strong>
      </p>

      <ul>
        <li class="toc-item">
          <a href="#EBNF-syntax">Extended Backus-Naur Form syntax definition</a>
        </li>

        <li class="toc-item">
          <a href="#syntax-diagrams">Railroad diagrams syntax definition</a>
        </li>
      </ul>

    </li>

    <li>

      <!-- Tokenization -->

      <p class="toc-title"><strong><a href="#tokenization">Tokenization</a></strong></p>
      <ul>
        <li class="toc-item">
          <a href="#preprocessing">Preprocessing the input stream</a>
        </li>

        <li class="toc-item">
          <a href="#consume-token">Consume a token</a>
        </li>

        <li class="toc-item">
          <a href="#consume-string">Consume a string token</a>
        </li>

        <li class="toc-item">
          <a href="#consume-number">Consume a number token</a>
        </li>

        <li class="toc-item">
          <a href="#consume-identifier">Consume an identifier token</a>
        </li>

        <li class="toc-item">
          <a href="#check-start-of-identifier">Check if a code point would start an identifier</a>
        </li>

        <li class="toc-item">
          <a href="#check-start-of-number">Check if three code points would start a number</a>
        </li>
      </ul>
    </li> <!-- End of Tokenization -->

    <li>

      <!-- Parsing -->

      <p class="toc-title"><strong><a href="#parsing">Parsing</a></strong></p>
      <ul>
        <li class="toc-item">
          <a href="#consume-statement">Consume a statement</a>
        </li>

        <li class="toc-item">
          <a href="#consume-simple-block">Consume a simple block</a>
        </li>

        <li class="toc-item">
          <a href="#consume-assignement">Consume an assignement</a>
        </li>

        <li class="toc-item">
          <a href="#consume-operation">Consume an operation</a>
        </li>

        <li class="toc-item">
          <a href="#consume-function-call">Consume a function call</a>
        </li>

        <li class="toc-item">
          <a href="#consume-function-def">Consume a function declaration</a>
        </li>

        <li class="toc-item">
          <a href="#consume-if-clause">Consume an if clause</a>
        </li>

        <li class="toc-item">
          <a href="#consume-else-clause">Consume an else clause</a>
        </li>

        <li class="toc-item">
          <a href="#consume-for-loop">Consume a for loop declaration</a>
        </li>
        <li class="toc-item">
          <a href="#consume-foreach-loop">Consume a foreach loop declaration</a>
        </li>

        <li class="toc-item">
          <a href="#consume-while-loop">Consume a while loop declaration</a>
        </li>

        <li class="toc-item">
          <a href="#consume-do-while-loop">Consume a do-while loop declaration</a>
        </li>

        <li class="toc-item">
          <a href="#consume-class">Consume a class declaration</a>
        </li>

        <li class="toc-item">
          <a href="#consume-interface">Consume an interface declaration</a>
        </li>

        <li class="toc-item">
          <a href="#consume-enum">Consume an enum declaration</a>
        </li>

        <li class="toc-item">
          <a href="#consume-import">Consume an import directive</a>
        </li>

        <li class="toc-item">
          <a href="#consume-from">Consume a from directive</a>
        </li>

        <li class="toc-item">
          <a href="#consume-namespace">Consume a namespace declaration</a>
        </li>

        <li class="toc-item">
          <a href="#consume-extends">Consume an extends directive</a>
        </li>
      </ul>
    </li> <!-- End of Parsing -->
  </ol>


  <!-- Introduction -->

  <div id="intro">
    <h2>1. Introduction</h2>
    <p>This document describes the syntax of Lotus source code.</p>

    <p>
      It also defines algorithms to convert text into a list of tokens, and then transform it into an abstract syntax
      tree, that can be analysed, verified, and used for interpretation or translation purposes, for example to HTML,
      CSS, and JavaScript as does <a href="https://github.com/lotuslang/lotusjs">LotusJS</a>.
    </p>

    <p>
      It doesn't, however, describes how the resulting <a href="#token-stream-def">token stream</a> or
      <a href="#parse-tree-model">Parse Tree</a> can be interpreted or analyzed. This may be described by other
      documents.
    </p>

    <p>
        As this specification is intended for authors of tools that operates and interacts with documents that use
        the syntax described here, it sacrifies clarity for precision, and brevity for completeness. As such, this
        document is not meant to be a tutorial, and more beginner-friendly documents should be used instead.
      </p>

    <!-- Conventions -->

    <div id="conventions">
      <h3 id="conventions">1.1 Visual and Writing Conventions</h3>

      <p><strong>Notes:</strong> Notes and informative sections are presented as a quote block and starts with the word
        "Note:".
      </p>

      <div class="note">
        <p>Note: This is an example of an informative section</p>
      </div>

      <p>
        <strong>Examples:</strong> Examples in this document are presented as a quote block and starts with the
        word "Example".
      </p>

      <div class="example">
        <p>Example: This is an example of an example section</p>
      </div>

      <p>
        <strong>Short Code Segment :</strong> Short code segments, such as token names, are presented in
        <code class="inline">&lt;code&gt;</code> tags.
      </p>

      <p>
        <code class="inline">This is a short code segment</code>
      </p>

      <p>
        <strong>Multi-line Code Segment:</strong> Long/Multi-line code segments, such as informal code examples, are
        presented in <code class="inline">&lt;pre&gt;</code> tags.
      </p>
      <pre><code>This is
A multiline
Code section</code></pre>
      <p>
        <strong>Informal section:</strong> Informal sections are preceded by the words "<em>This section is
          informative</em>" written in <em>italics</em>. Informal sections are portions of text that are here only
        to clarify, give information, or give context. At most, they should only be treated as recommendations, not as
        requirements of any sorts.
      </p>
      <p>
        <strong>Terms/Definition:</strong> Terms defined are enclosed in HTML <code class="inline">&lt;dt&gt;</code>
        tags,
        and their definition are enclosed in HTML <code class="inline">&lt;dd&gt;</code> tags.
      </p>
    </div>
  </div>


  <!-- Overview -->

  <div id="overview">
    <h2>2. Overview</h2>

    <p>
      Compilers and interpreters must use the parsing rules described in this specification to generate an <em>Abstract
        Syntax Tree</em> (AST) that can then be used to analyze, optimize or translate Lotus source code.
    </p>

    <!-- Definitions -->

    <div id="general-defs">
      <h3>2.1 Definitions</h3>
      <p>This section defines terms used throughout this document.</p>
      <dl>
        <dt id="code-point-def">
          code point
        </dt>
        <dd>
          A <a href="http://unicode.org/glossary/#code_point">Unicode code point</a>. A Unicode character with a value
          between 0 (hexadecimal) and FFFF (hexadecimal).
        </dd>

        <dt id="input-stream-def">
          input-stream
        </dt>
        <dd>
          A Unicode stream (or list) of <a href="#code-point">code points</a>.
        </dd>

        <dt id="consume-next-def">
          consume the next point
        </dt>
        <dd>
          Pop a <a href="#code-point-def">code point</a> from the <a href="#input-stream-def">input stream</a> and
          return it.
        </dd>

        <dt id="next-code-point-def">
          next input code point
        </dt>
        <dd>
          The first <a href="#code-point-def">code point</a> in the <a href="#input-stream-def">input stream</a> that
          has
          not been consumed yet.
        </dd>

        <dt id="current-code-point-def">
          current input code point
        </dt>
        <dd>
          The last <a href="#code-point">code point</a> to have been consumed.
        </dd>

        <dt id="reconsume-code-point-def">
          reconsume the current code point
        </dt>
        <dd>
          Push the <a href="#current-code-point-def">current input code point</a> on top of the <a
            href="#input-stream-def">input stream</a>,
          so that the next time that you are instructed to consume the <a href="#next-code-point-def">next input code
            point</a>, the
          <a href="#current-code-point-def">current input code point</a> will be consumed instead.
        </dd>

        <dt id="eof-def">
          EOF code point
        </dt>
        <dd>
          A conceptual <a href="#code-point-def">code point</a> used to represent the end of the <a
            href="#input-stream-def">input stream</a>.
        </dd>

        <dt id="digit-def">
          digit
        </dt>
        <dd>
          A <a href="#code-point-def">code point</a> between U+0030 DIGIT ZERO (0) and U+0039 DIGIT NINE (9).
        </dd>

        <dt id="hex-digit-def">
          hex digit
        </dt>
        <dd>
          A <a href="#digit-def">digit</a>, or a <a href="#code-point-def">code point</a> between U+0041 LATIN CAPITAL
          LETTER A (A) and U+0046 LATIN CAPITAL LETTER F (F), or a <a href="#code-point-def">code point</a> between U+0061 LATIN
          SMALL LETTER A (a) and U+0066 LATIN SMALL LETTER F (f).
        </dd>

        <dt id="number-def">
          number
        </dt>
        <dd>
          An optional sequence of <a href="#digit-def">digits</a>, optionally followed by a U+002E FULLSTOP (.) and a
          sequence of <a href="#digit-def">digits</a>, optionally followed by a U+0045 LATIN CAPITAL LETTER E (E) or U+0065 LATIN
          SMALL LETTER E (e), a U+002B PLUS SIGN (+) or a U+002D HYPHEN MINUS (-), and an optional sequence of <a href="#digit-def">digits</a>,
          optionally followed by a U+002E FULLSTOP (.) and a sequence of <a href="#digit-def">digits</a>.
        </dd>

        <dt id="upper-letter-def">
          uppercase letter
        </dt>
        <dd>
          A <a href="#code-point-def">code point</a> between U+0041 LATIN CAPITAL LETTER A (A) and U+005A LATIN CAPITAL
          LETTER Z (Z).
        </dd>

        <dt id="lower-letter-def">
          lowercase letter
        </dt>
        <dd>
          A <a href="#code-point-def">code point</a> between U+0061 LATIN SMALL LETTER A (a) and U+007A LATIN SMALL
          LETTER
          Z
          (z).
        </dd>

        <dt id="letter-def">
          letter
        </dt>
        <dd>
          An <a href="#uper-letter-def">uppercase</a> or <a href="#lower-letter-def">lowercase</a> letter.
        </dd>

        <dt id="non-ascii-def">
          non-ASCII code point
        </dt>
        <dd>
          A <a href="#code-point-def">code point</a> with a value equal or greater than U+0080 CONTROL.
        </dd>

        <dt id="name-code-point-def">
          name code point
        </dt>
        <dd>
          A <a href="#letter-def">letter</a>, a <a href="#digit-def">digit</a>, a <a href="#non-ascii-def">non-ASCII
            code point</a>, a U+002D HYPHEN MINUS (-), or a U+005F LOW LINE (_).
        </dd>

        <dt id="newline">
          newline
        </dt>
        <dd>
          A <a href="#code-point-def">code point</a> with a value of U+000A LINE FEED (represented as the escape
          sequence '\n' in most programming languages).
        </dd>

        <dt id="whitespace">
          whitespace
        </dt>
        <dd>
          A <a href="#newline">newline</a>, a U+>0009 CHARACTER TABULATION, or a U+0020 SPACE.
        </dd>

        <dt id="max-code-point-def">
          maximum allowed code point
        </dt>
        <dd>
          The <a href="#code-point-def">code point</a> with the value U+FFFF.
        </dd>

        <dt id="token-stream-def">
          input token stream
        </dt>
        <dd>
          The stream of token produced by the tokenizer.
        </dd>

        <dt id="current-token-def">
          current input token
        </dt>
        <dd>
          The last token from the <a href="#token-stream-def">input token stream</a> to have been consumed.
        </dd>

        <dt id="next-token-def">
          next input token
        </dt>
        <dd>
          The first token in the <a href="#token-stream">input token stream</a> that has not been consumed yet.
        </dd>

        <dt id="eof-token-def">
          EOF token
        </dt>
        <dd>
          A conceptual token used to represent the end of the <a href="#token-stream-def">input token stream</a>.
        </dd>

        <dt id="reconsume-token-def">
          reconsume the current input token
        </dt>
        <dd>
          Push the <a href="#current-token-def">current input token</a> will be consumed instead.
        </dd>
      </dl>
    </div>

    <!-- Token types -->

    <div id="tokens">
      <h3>2.2 Token types</h3>

      <p>Implementations should use the algorithms described in <a href="#tokenization">section 4</a>, or act as they use
        them (i.e. the resulting token stream should contain at least the same information, no matter the underlying implementation).
        The <a href="#tokenization">tokenization</a> phase should output a stream of zero or more of the following tokens.
      </p>

      <dl>
        <dt id="delim-token">
          <code class="inline">&lt;delim-token&gt;</code>
        </dt>
        <dd>
          A token holding a single <a href="#code-point-def">code point</a> as its value.
        </dd>

        <dt id="whitespace-token">
          <code class="inline">&lt;whitespace-token&gt;</code>
        </dt>
        <dd>
          A token representing one or more <a href="#whitespace-def">whitespace</a>.
        </dd>

        <dt id="logicial-or-token">
          <code class="inline">&lt;logical-or-token&gt;</code>
        </dt>
        <dd>
          A token representing a logical OR operator (U+007C VERTICAL LINE U+007C VERTICAL LINE <code class="inline">||</code>).
        </dd>

        <dt id="logical-and-token">
          <code class="inline">&lt;logical-and-token&gt;</code>
        </dt>
        <dd>
          A token representing a logical AND operator (U+0026 AMPERSAND U+0026 AMPERSAND <code class="inline">&&</code>).
        </dd>

        <dt id="logical-xor-token">
          <code class="inline">&lt;logical-xor-token&gt;</code>
        </dt>
        <dd>
          A token representing a logical XOR operator (U+005E CIRCUMFLEX ACCENT U+005E CIRCUMFLEX ACCENT <code class="inline">^^</code>).
        </dd>

        <dt id="equality-token">
          <code class="inline">&lt;equality-token&gt;</code>
        </dt>
        <dd>
          A token representing an equality operator (U+003D EQUALS SIGN U+003D EQUALS SIGN <code class="inline">==</code>).
        </dd>

        <dt id="less-equal-token">
          <code class="inline">&lt;less-equal-token&gt;</code>
        </dt>
        <dd>
          A token representing a less-or-equal operator (U+003C LESS-THAN SIGN U+003D EQUALS SIGN <code class="inline">&lt;=</code>).
        </dd>

        <dt id="greater-equal-token">
          <code class="inline">&lt;greater-equal-token&gt;</code>
        </dt>
        <dd>
          A token representing a greater-or-equal operator (U+003E GREATER-THAN SIGN U+003D EQUALS SIGN <code class="inline">&gt;=</code>).
        </dd>

        <dt id="not-equal-token">
          <code class="inline">&lt;not-equal-token&gt;</code>
        </dt>
        <dd>
          A token representing a not-equal operator (U+0021 EXCLAMATION MARK U+003D EQUALS SIGN <code class="inline">!=</code>).
        </dd>

        <dt id="decrement-token">
          <code class="inline">&lt;decrement-token&gt;</code>
        </dt>
        <dd>
          A token representing a decrement operator (U+002D HYPHEN MINUS U+002D HYPHEN MINUS <code class="inline">--</code>).
        </dd>

        <dt id="incremement-token">
          <code class="inline">&lt;increment-token&gt;</code>
        </dt>
        <dd>
          A token representing an increment operator (U+002B PLUS SIGN U+002B PLUS SIGN <code class="inline">++</code>).
        </dd>

        <dt id="arrow-token">
          <code class="inline">&lt;arrow-token&gt;</code>
        </dt>
        <dd>
          A token representing an arrow operator (U+003D EQUALS SIGN U+002B PLUS SIGN <code class="inline">=&gt;</code>)
        </dd>

        <dt id="number-token">
          <code class="inline">&lt;number-token&gt;</code>
        </dt>
        <dd>
          A token representing a <a href="#number-def">number</a>. It holds one value: the numeric value
          stored as a sequence of <a href="#code-point-def">code points</a>.
        </dd>

        <dt id="string-token">
          <code class="inline">&lt;string-token&gt;</code>
        </dt>
        <dd>
          A token representing a string. It holds two value: the content of the string, and the
          <a href="#code-point-def">code point</a> delimiting the string.
        </dd>

        <dt id="ident-token">
          <code class="inline">&lt;ident-token&gt;</code>
        </dt>
        <dd>
          A token representing an identifier. It holds one value : the value of the identifier, stored as a
          sequence of <a href="#code-point-def">code points</a>.
        </dd>
      </dl>
    </div>

    <!-- Tokens Diagrams -->

    <div id="tokens-diagrams">
      <h3>2.3 Tokens Railroad Diagrams</h3>
    </div>

    <!-- Tokenization Errors -->

    <div id="tokenization-errors">
      <h3>2.4 Tokenization Errors</h3>
    </div>

    <!-- Parse Tree Model -->

    <div id="parse-tree-model">
      <h3>2.5 Parse Tree Model</h3>
    </div>

    <!-- Parsing Errors -->

    <div id="parsing-errors">
      <h3>2.7 Parsing Errors</h3>
    </div>

  </div>


<!-- Formal Syntax Definition -->

  <div id="syntax">
    <h2>3. Formal Syntax Definition</h2>

    <p>
      This section describes Lotus' syntax through <a href="https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form">
      EBNF</a> and railroad diagrams. An informal and more human-readable definition of the syntax can be found
      <a href="https://github.com/lotuslang/lotuslang/blob/master/Global/Lexical%20Structure.md">here</a>.
    </p>

    <!-- EBNF syntax definitions -->

    <div id="EBNF-syntax">
      <h3>3.1 Extended Backus-Naur Form syntax definitions</h3>
    </div>

    <!-- Syntax Diagrams -->

    <div id="syntax-diagrams">
      <h3>3.2 Railroad syntax diagrams</h3>
    </div>
  </div>


  <!-- Tokenization -->

  <div id="tokenization">
    <h2>4. Tokenization</h2>

    <p><em>This section is informal</em></p>

    <p>
      Tokenization is a process by which an algorithm converts a sequence of <a href="#code-point-def">code
        points</a> into a list tokens.
    </p>

    <p>
      A token is an object representing zero or more <a href="#code-point-def">code points</a> and optionally metadata
      associated with it.
    </p>

    <div class="example">
      <p>
        Example: A <a href="#number-token"><code class="inline">&lt;number-token&gt;</code></a> represents a
        <a href="#number-def">number</a>.
      </p>

      <p>
        It holds a sequence of <a href="#code-point-def">code points</a>, as well as the numeric value of this
        sequence.
      </p>

      <p>
        The sequence of <a href="#code-point-def">code points</a> is its representation
      </p>
    </div>

    <p>
      The following algorithms describes how to transform a stream of <a href="#code-point-def">code points</a>,
      designated as
      the <a href="#input-stream-def">input stream</a>, into a stream of tokens.
    </p>

    <p>
      Implementations should act as if they used those algorithms (i.e. the resulting token stream should be contain
      at lest the same information as if it implemented the following algorithms. See <a href="">the Lotus tokenizer
        reference implementation</a> for more information).
    </p>

    <!-- Preprocessing the input stream -->

    <div id="preprocessing">
      <h3>3.1 Preprocessing the input stream</h3>

      <p>
        Before sending the <a href="#input-stream-def">input stream</a> to the tokenizer, it needs to be processed as
        following :
      </p>

      <ul>
        <li>
          <p>Replace any U+0000 NULL <a href="#code-point-def">code point</a> with U+FFFD REPLACEMENT CHARACTER</p>
        </li>
        <li>
          <p>
            Replace any U+000D CARRIAGE RETURN <a href="#code-point-def">code point</a>, U+000C FORM FEED
            <a href="#code-point-def">code point</a>, or pair of U+000D CARRIAGE RETURN U+000A LINE FEED
            <a href="#code-point-def">code points</a> by a single U+000A LINE FEED <a href="#code-point-def">code
              point</a>.
          </p>
        </li>
      </ul>
    </div>

    <!-- Consume a token -->

    <div id="consume-token">
      <h3>4.2 Consume a token</h3>

      <p>
        This section describes <strong><em>how to consume a token</em></strong> from a stream of
        <a href="#code-point-def">code points</a>.
      </p>

      <p>
        This algorithm returns a single <a href="#code-point-def">code point</a>.
      </p>

      <p>
        <a href="#consume-next-def">Consume the next input code point</a> from the <a href="#input-stream-def">input
          stream</a>.
      </p>

      <dl>
        <dt>
          <a href="#whitespace-def">whitespace</a>
        </dt>
        <dd>
          Consume as much <a href="#whitespace-def">whitespace</a> as possible and return a
          <code class="inline"><a href="#whitespace-token">&lt;whitespace-token&gt;</a></code>.
        </dd>

        <dt>
          U+0022 QUOTATION MARK (<code class="inline">"</code>)
        </dt>
        <dd>
          <a href="#consume-string">Consume a string token</a> with the ending delimiter set to the
          <a href="#current-token-def">current token</a>. Return the resulting <code class="inline">
            <a href="#string-token">&lt;string-token&gt;</a></code>.
        </dd>

        <dt>
          U+0027 APOSTROPHE (<code class="inline">'</code>)
        </dt>
        <dd>
          <a href="#consume-string">Consume a string token</a> with the ending delimiter set to the
          <a href="#current-token-def">current token</a>. Return the resulting <code class="inline">
            <a href="#string-token">&lt;string-token&gt;</a></code>.
        </dd>

        <dt>
          <a href="#digit-def">digit</a>
        </dt>
        <dd>
          <a href="#reconsume-code-point-def">Reconsume the current code point</a>.
          <a href="#consume-number-token">Consume a number token</a> and return the resulting
          <code class="inline"><a href="#number-token">&lt;number-token&gt;</a></code>.
        </dd>

        <dt>
          U+002E FULL STOP (<code class="inline">.</code>)
        </dt>
        <dd>
          <a href="#check-start-of-number">If the three next input code points would start a number</a>,
          <a href="#reconsume-code-point-def">reconsume the current code point</a>,
          <a href="#consume-number-token">consume a number token</a> and return the resulting
          <code class="inline"><a href="#number-token">&lt;number-token&gt;</a></code>.
          Otherwise, return a <code class="inline"><a href="#delim-token">&lt;delim-token&gt;</a></code>
          with its value set to the <a href="#current-code-point-def">current input code point</a>.
        </dd>

        <dt>
          U+002D HYPHEN MINUS (<code class="inline">-</code>)
        </dt>
        <dd>
          <p>
            If the <a href="#next-code-point-def">next input code point</a> is U+002D HYPHEN MINUS (<code class="inline">-</code>),
            <a href="#consume-next-def">consume it</a> and return a <code class="inline"><a href="#decrement-token">&lt;decrement-token&gt;</a></code>
          </p>

          <a href="#check-start-of-number">If the three next input code points would start a number</a>,
          <a href="#reconsume-code-point-def">reconsume the current code point</a>,
          <a href="#consume-number-token">consume a number token</a> and return the resulting
          <code class="inline"><a href="#number-token">&lt;number-token&gt;</a></code>.
          Otherwise, return a <code class="inline"><a href="#delim-token">&lt;delim-token&gt;</a></code>
          with its value set to the <a href="#current-code-point-def">current input code point</a>.
        </dd>

        <dt>
          U+002B PLUS SIGN (<code class="inline">-</code>)
        </dt>
        <dd>
          <p>
            If the <a href="#next-code-point-def">next input code point</a> is U+002E PLUS SIGN (<code class="inline">+</code>),
            <a href="#consume-next-def">consume it</a> and return a <code class="inline"><a href="#increment-token">&lt;increment-token&gt;</a></code>
          </p>

          <a href="#check-start-of-number">If the three next input code points would start a number</a>,
          <a href="#reconsume-code-point-def">reconsume the current code point</a>,
          <a href="#consume-number-token">consume a number token</a> and return the resulting
          <code class="inline"><a href="#number-token">&lt;number-token&gt;</a></code>.
          Otherwise, return a <code class="inline"><a href="#delim-token">&lt;delim-token&gt;</a></code>
          with its value set to the <a href="#current-code-point-def">current input code point</a>.
        </dd>

        <dt>
          U+005F LOW LINE (<code class="inline">_</code>)
        </dt>
        <dd>
          <a href="#reconsume-code-point-def">Reconsume the current code point</a>.
          <a href="#consume-identifier">Consume an identifier</a> and return the resulting <code class="inline"><a href="#ident-token">&lt;ident-token&gt;</a></code>.
        </dd>

        <dt>
          <a href="#letter-def">letter</a>
        </dt>
        <dd>
          <a href="#reconsume-code-point-def">Reconsume the current code point</a>.
          <a href="#¢onsume-identifier">Consume an identifier</a> and return the resulting <code class="inline"><a href="#ident-token">&lt;ident-token&gt;</a></code>.
        </dd>

        <dt>
          U+0023 NUMBER SIGN (<code class="inline">#</code>)
        </dt>
        <dd>
          <p>
            If the two <a href="#next-code-point-def">next input code points</a> are U+0023 NUMBER SIGN U+0023 NUMBER SIGN (<code class="inline">##</code>),
            then, while the three <a href="#next-code-point-def">next input code points</a> are not U+0023 NUMBER SIGN U+0023 NUMBER SIGN U+0023 NUMBER SIGN
            (<code class="inline">###</code>), <a href="#consume-next-def">consume the next input code point</a>. Then, return a
            <code class="inline"><a href="#whitespace-token">&lt;whitespace-token&gt;</a></code>.
          </p>
          <p>
            Otherwise, while the <a href="#next-code-point-def">next input code point</a> is not U+000A LINE FEED
            (represented as the escape sequence '\n' in most programming languages), <a href="#consume-next-def">consume it</a>. Then, return a
            <code class="inline"><a href="#whitespace-token">&lt;whitespace-token&gt;</a></code>.
          </p>
        </dd>

        <dt>
          U+007C VERTICAL LINE (<code class="inline">|</code>)
        </dt>
        <dd>
          If the <a href="#next-code-point-def">next input code point</a> is U+007C VERTICAL LINE (<code class="inline">|</code>),
          <a href="#consume-next-def">consume it</a> and return a <code class="inline"><a href="#logical-or-token">&lt;logical-or-token&gt;</a></code>.
        </dd>

        <dt>
          U+0026 AMPERSAND (<code class="inline">&amp;</code>)
        </dt>
        <dd>
          If the <a href="#next-code-point-def">next input code point</a> is U+0026 AMPERSAND (<code class="inline">&</code>),
          <a href="#consume-next-def">consume it</a> and return a <code class="inline"><a href="#logical-and-token">&lt;logical-and-token&gt;</a></code>.
        </dd>

        <dt>
          U+005E CIRCUMFLEX ACCENT (<code class="inline">^</code>)
        </dt>
        <dd>
          If the <a href="#next-code-point-def">next input code point</a> is U+005E CIRCUMFLEX ACCENT (<code class="inline">^</code>),
          <a href="#consume-next-def">consume it</a> and return a <code class="inline"><a href="#logical-xor-token">&lt;logical-xor-token&gt;</a></code>.
        </dd>

        <dt>
          U+003D EQUALS SIGN (<code class="inline">=</code>)
        </dt>
        <dd>
          <p>
            If the <a href="#next-code-point-def">next input code point</a> is U+003D EQUALS SIGN (<code class="inline">=</code>),
            <a href="#consume-next-def">consume it</a> and return a <code class="inline"><a href="#equality-token">&lt;equality-token&gt;</a></code>.
          </p>

          <p>
            Otherwise, if the <a href="#next-code-point-def">next input code point</a> is U+003E GREATER-THAN SIGN (<code class="inline">&gt</code>),
            <a href="#consume-next-def">consume it</a> and return a <code class="inline"><a href="#arrow-token">&lt;arrow-token&gt;</a></code>.
          </p>
        </dd>

        <dt>
          U+003C LESS-THAN SIGN (<code class="inline">&lt;</code>)
        </dt>
        <dd>
          If the <a href="#next-code-point-def">next input code point</a> is U+003D EQUALS SIGN (<code class="inline">=</code>),
          <a href="#consume-next-def">consume it</a> and return a <code class="inline"><a href="#less-equal-token">&lt;less-equal-token&gt;</a></code>.
        </dd>

        <dt>
          U+003E GREATER-THAN SIGN (<code class="inline">&gt;</code>)
        </dt>
        <dd>
          If the <a href="#next-code-point-def">next input code point</a> is U+003D EQUALS SIGN (<code class="inline">=</code>),
          <a href="#consume-next-def">consume it</a> and return a <code class="inline"><a href="#greater-equal-token">&lt;greater-equal-token&gt;</a></code>.
        </dd>

        <dt>
          U+0021 EXCLAMATION MARK (<code class="inline">&excl;</code>)
        </dt>
        <dd>
          If the <a href="#next-code-point-def">next input code point</a> is U+003D EQUALS SIGN (<code class="inline">=</code>),
          <a href="#consume-next-def">consume it</a> and return a <code class="inline"><a href="#not-equal-token">&lt;not-equal-token&gt;</a></code>.
        </dd>
      </dl>
    </div>

    <!-- Consume a string token -->

    <div id="consume-string">
      <h3>4.3 Consume a string token</h3>

      <p>
        This section describes <strong><em>how to consume a string token</em></strong> from a stream of
        <a href="#code-point-def">code points</a>.
      </p>

      <p>
        This algorithms should be called with an <em>ending delimiter</em>, which denotes the
        <a href="#code-point-def">code point</a> that ends the string. If no <em>ending delimiter</em>
        is specified, use the <a href="#current-code-point">current input code point</a> instead.
      </p>

      <p>
        This algorithm returns a single <code class="inline"><a href="#ident-token">&lt;string-token&gt;</a></code>.
      </p>

      <p>
        Let <em>representation</em> be an empty string.
      </p>

      <p>
        Repeatedly <a href="#consume-next-def">consume the next code point</a> from the
        <a href="#input-stream-def">input stream</a>.
      </p>

      <dl>
        <dt>
          <a href="#eof-def">EOF</a>
        </dt>
        <dd>
          Throw an <a href="#unexpected-oef">"Unexpected end of file" exception</a>.
        </dd>

        <dt>
          <em>ending delimiter</em>
        </dt>
        <dd>
          Return a <code class="inline"><a href="#string-token">&lt;string-token&gt;</a></code> and let its value be <em>representation</em>
          and its ending delimiter be <em>ending delimiter</em>.
        </dd>

        <dt>
          anything else
        </dt>
        <dd>
          Append the <a href="#current-code-point-def">current input code point</a> to <em>representation</em>.
        </dd>
      </dl>
    </div>

    <!-- Consume a number token -->

    <div id="consume-number">
      <h3>4.4 Consume a number token</h3>

      <p>
        This section describes <strong><em>how to consume a number token</em></strong> from a stream of
        <a href="#code-point-def">code points</a>.
      </p>

      <p>
        This algorithm returns a single <code class="inline"><a href="#ident-token">&lt;number-token&gt;</a></code>.
      </p>

      <div class="note">
        <p>
          Note: This algorithm assumes that the <a href="#input-stream-def">input stream</a> can <a href="#check-start-of-number">start a valid number</a>.
        </p>
      </div>

      <ol>

        <li>
          Let <em>representation</em> be an empty string.
        </li>

        <br/>

        <li>
          If the <a href="#next-code-point-def">next input code point</a> is U+002B PLUS SIGN (<code
            class="inline">+</code>)
          or U+002D HYPHEN MINUS (<code class="inline">-</code>), <a href="#consume-next-def">consume it</a> and append it to <em>representation</em>.
        </li>

        <br/>

        <li>
          While the <a href="#next-code-point-def">next input code point</a> is a <a href="#digit-def">digit</a>,
          <a href="#consume-next-def">consume it</a> and append it to <em>representation</em>.
        </li>

        <br/>

        <li>
          If the <a href="#current-code-point-def">two next input code point</a> are a U+002E FULL STOP
          (<code class="inline">.</code>) followed by a <a href="#digit-def">digit</a>.
          <br/>
          <ol>
            <li>
              <a href="#consume-next-def">Consume the two next code points</a> and append them to <em>reprensentation</em>.
            </li>

            <br/>

            <li>
              While the <a href="#next-code-point-def">next input code point</a> is a <a href="#digit-def">digit</a>,
              <a href="#consume-next-def">consume it</a> and append it to <em>representation</em>.
              <div class="note"><p>
                  Note: If the U+002E FULL STOP was not followed by a <a href="#digit-def">digit</a> throw an <a href="#throw-invalid-number">"Invalid number
                  formatting" exception</a>.
                </p></div>
            </li>
          </ol>
        </li>

        <li>
          If the <a href="#next-code-point-def">next input code point</a> is U+0045 LATIN CAPITAL LETTER E
          (<code class="inline">E</code>) or U+0065 LATIN SMALL LETTER E (<code class="inline">e</code>), <a href="#consume-next-def">consume it</a>
          and append it to <em>representation</em>, then:
          <ol>
            <li>
              <a href="#check-start-of-number">Check if the three <a href="#next-code-point-def">next input code points</a></a> would start a number.
            </li>

            <br/>

            <li>
              If the check failed, then throw an <a href="#throw-invalid-number">"Invalid number formatting" exception</a> and exit.
            </li>

            <br/>

            <li>
              Otherwise (i.e. if the check succeeded), then, if the <a href="#next-code-point-def">next input code point</a> is U+002B PLUS
              SIGN (<code class="inline">+</code>) or U+002D HYPHEN MINUS (<code class="inline">-</code>), <a href="#consume-next-def">consume it</a>
              and append it to <em>representation</em>.
            </li>

            <br/>

            <li>
              While the <a href="#next-code-point-def">next input code point</a> is a <a href="#digit-def">digit</a>, <a href="#consume-next-def">consume it</a>
              and append it to the <em> representation</em>.
            </li>

            <br/>

            <li>
              If the <a href="#next-code-point-def">next input code point</a> is U+002E FULL STOP (<code class="inline">.</code>),
              <a href="#consume-next-def">consume it</a> and append it to the <em>reprensentation</em>.
            </li>

            <br/>

            <li>
              While the <a href="#next-code-point-def">next input code point</a> is a <a href="#digit-def">digit</a>, <a href="#consume-next-def">consume it</a>
              and append it to the <em>representation</em>.

              <div class="note">
                <p>
                  Note: If the U+002E FULL STOP was not followed by a <a href="#digit-def">digit</a> throw an <a href="#throw-invalid-number">"Invalid number
                  formatting" exception</a>.
                </p>
              </div>
            </li>
          </ol>
        </li>
      </ol>

      <p>
        Return a <code class="inline"><a href="#number-token">&lt;number-token&gt;</a></code> and let its value be <em>representation</em>.
      </p>
    </div>

    <!-- Consume an identifier token -->

    <div id="consume-identifier">
      <h3>4.5 Consume an identifier token</h3>

      <p>
        This section describes <strong><em>how to consume an indentifier token</em></strong> from a stream of <a href="#code-point-def">code points</a>.
      </p>

      <p>
        This algorithm returns a single <code class="inline"><a href="#ident-token">&lt;ident-token&gt;</a></code>.
      </p>

      <div class="note">
        <p>
          Note: This algorithm assumes that the <a href="#input-stream-def">input stream</a> can <a href="#check-start-of-identifier">start a valid identifier</a>.
        </p>
      </div>

      <p>
        Let <em>representation</em> be an empty string.
      </p>

      <p>
        While the <a href="#next-code-point-def">next input code point</a> is a <a href="#name-code-point-def">valid name code point</a>,
        <a href="#consume-next-def">consume it</a> and append it to <em>representation</em>.
      </p>

      <p>
        Return a <code clas="inline"><a href="#ident-token"></a>&lt;ident-token&gt;</code> and let its value be <em>representation</em>.
      </p>
    </div>

    <!-- Check start of an identifier -->

    <div id="check-start-of-identifier">
      <h3>4.6 Check if a code point would start an identifier</h3>

      <p>
        This section desbribes <strong><em>how to check if a code point would start an identifier</em></strong>. This algorithm can be called
        with a <a href="#code-point-def">code point</a> or from the <a href="#input-stream-def">input stream</a>.
      </p>

      <div class="note">
        <p>
          Note: This algorithm doesn't consume any code points. If it is called from the <a href="#input-stream-def">input stream</a>,
          it should push back onto the top of the stream any <a href="#code-point-def">code point</a> consumed.
        </p>
      </div>

      <p>
        Look at the <a href="#code-point-def">code point</a>.
      </p>

      <dl>
        <dt>
          U+005F LOW LINE (<code class="inline">_</code>)
        </dt>
        <dd>
          Return true.
        </dd>

        <dt>
          <a href="#letter-def">letter</a>
        </dt>
        <dd>
          Return true.
        </dd>

        <dt>
          <a href="#digit-def">digit</a>
        </dt>
        <dd>
          Return false.
        </dd>

        <dt>
          anything else
        </dt>
        <dd>
          Return false
        </dd>
      </dl>
    </div>

    <!-- Check start of a number -->

    <div id="check-start-of-number">
      <h3>4.7 Check if three code points would start a number</h3>

      <p>
        This section describes <strong><em>how to check if three code points would start a number</em></strong>. This algorithm
        can be called with three <a href="#code-point-def">code points</a>, or from the <a href="#input-stream-def">input stream</a>.
      </p>

      <div class="note">
        <p>
          Note: This algorithm doesn't consume any <a href="#code-point-def">code point</a>. If it is called from the
          <a href="#input-stream-def">input stream</a>, it should push back onto the top of the stream any <a href="#code-point-def">code point</a>
          consumed.
        </p>
      </div>

      <p>
        Look at the first <a href="#code-point-def">code point</a>.
      </p>

      <dl>
        <dt>
          U+002B PLUS SIGN (<code class="inline">+</code>) or U+002D HYPHEN MINUS (<code class="inline">-</code>)
        </dt>
        <dd>
          <p>
            If the second <a href="#code-point-def">code point</a> is a <a href="#digit-def">digit</a>, return true.
          </p>
          <p>
            Otherwise, if the second <a href="#code-point-def">code point</a> is U+002E FULL STOP (<code class="inline">.</code>), return true.
          </p>
          <p>
            Otherwise, return false.
          </p>
        </dd>

        <dt>
          U+002E FULL STOP (<code class="inline">.</code>)
        </dt>
        <dd>
          If the second <a href="#code-point-def">code point</a> is a <a href="#digit-def">digit</a>, return true. Otherwise, return false.
        </dd>

        <dt>
          <a href="#digit-def">digit</a>
        </dt>
        <dd>
          Return true.
        </dd>

        <dt>
          anything else
        </dt>
        <dd>
          Return false.
        </dd>
      </dl>
    </div>

  </div>


  <!-- Parsing -->

  <div id="parsing">
    <h2>5. Parsing</h2>

    <!-- Consume a statement -->

    <div id="consume-statement">
      <h3>5.1 Consume a statement</h3>
    </div>

    <!-- Consume a simple block -->

    <div id="consume-simple-block">
      <h3>5.2 Consume a simple block</h3>
    </div>

    <!-- Consume an assignement -->

    <div id="consume-assignement">
      <h3>5.3 Consume an assignement</h3>
    </div>

    <!-- Consume an operation -->

    <div id="consume-operation">
      <h3>5.4 Consume an operation</h3>
    </div>

    <!-- Consume a function call -->

    <div id="consume-function-call">
      <h3>5.5 Consume a function call</h3>
    </div>

    <!-- Consume a function declaration -->

    <div id="consume-function-def">
      <h3>5.6 Consume a function declaration</h3>
    </div>

    <!-- Consume an if clause -->

    <div id="consume-if-clause">
      <h3>5.7 Consume an if clause</h3>
    </div>

    <!-- Consume an else clause -->

    <div id="consume-else-clause">
      <h3>5.8 Consume an else clause</h3>
    </div>

    <!-- Consume a for loop declaration -->

    <div id="consume-for-loop">
      <h3>5.9 Consume a for loop declaration</h3>
    </div>

    <!-- Consume a foreach loop declaration -->

    <div id="consume-foreach-loop">
      <h3>5.10 Consume a foreach loop declaration</h3>
    </div>

    <!-- Consume a while loop declaration -->

    <div id="consume-while-loop">
      <h3>5.11 Consume a while loop declaration</h3>
    </div>

    <!-- Consume a do-while loop declaration -->

    <div id="consume-do-while-loop">
      <h3>5.12 Consume a do-while loop declaration</h3>
    </div>

    <!-- Consume a class declaration -->

    <div id="consume-class">
      <h3>5.13 Consume a class declaration</h3>
    </div>

    <!-- Consume an interface declaration -->

    <div id="consume-interface">
      <h3>5.14 Consume an interface declaration</h3>
    </div>

    <!-- Consume an enum declaration -->

    <div id="consume-enum">
      <h3>5.15 Consume an enum declaration</h3>
    </div>

    <!-- Consume an import directive -->

    <div id="consume-import">
      <h3>5.16 Consume an import directive</h3>
    </div>

    <!-- Consume a from directive -->

    <div id="consume-from">
      <h3>5.17 Consume a from directive</h3>
    </div>

    <!-- Consume a namespace declaration -->

    <div id="consume-namespace">
      <h3>5.18 Consume a namespace declaration</h3>
    </div>

    <!-- Consume an extends directive -->

    <div id="consume-extends">
      <h3>5.19 Consume an extends directive</h3>
    </div>

  </div>
</body>

</html>